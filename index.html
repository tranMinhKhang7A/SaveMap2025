<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Báº£n Ä‘á»“ an toÃ n trong lÅ© ğŸŒ§ï¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="icon.png">

  <!-- ThÆ° viá»‡n Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- ThÃªm Leaflet Routing Machine -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
  <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

  <!-- CSS riÃªng -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- TiÃªu Ä‘á» -->
  <div style="text-align: center; line-height: 1.4;">
    <h3 style="margin: 0; font-size: 20px; color: #0055aa;"> ğŸŒ§ï¸ Báº¢N Äá»’ AN TOÃ€N TRONG LÅ¨ </h3>
    <p style="margin: 3px 0 8px 0; font-size: 16px; color: #004080;">
      VÃ¬ má»™t mÃ¹a mÆ°a khÃ´ng ai bá»‹ bá» láº¡i
    </p>
    <p style="font-size: 14px; color: #333;">
      Má»™t báº£n Ä‘á»“ nhá» bÃ©, Ä‘Æ°á»£c váº½ nÃªn bá»Ÿi chÃ­nh nhá»¯ng ngÆ°á»i trong vÃ¹ng lÅ© â€” tháº§y cÃ´, há»c sinh, vÃ  nhá»¯ng táº¥m lÃ²ng nhÃ¢n Ã¡i ğŸ’™
    </p>
  </div>

  <!-- Bá»™ lá»c hiá»ƒn thá»‹ Ä‘iá»ƒm -->
  <div style="margin: 10px; font-size: 15px;">
    <label><input type="checkbox" id="filter_ngap" checked> ğŸš« Hiá»‡n Ä‘Æ°á»ng ngáº­p</label>
    <label style="margin-left: 10px;"><input type="checkbox" id="filter_antoan" checked> âœ… Hiá»‡n Ä‘iá»ƒm an toÃ n</label>
    <label style="margin-left: 10px;"><input type="checkbox" id="filter_cuuho" checked> ğŸ†˜ Hiá»‡n cá»©u há»™</label>
    <label style="margin-left: 10px;"><input type="checkbox" id="filter_tacduong" checked> ğŸ›‘ğŸš— Hiá»‡n táº¯c Ä‘Æ°á»ng</label>
  </div>

  <!-- Tráº¡ng thÃ¡i loáº¡i Ä‘iá»ƒm -->
  <div id="status" style="margin:10px; font-weight:bold; color:green;">
    ğŸŸ¢ Loáº¡i hiá»‡n táº¡i: âœ… Äiá»ƒm an toÃ n
  </div>

  <!-- NÃºt chá»n loáº¡i Ä‘iá»ƒm -->
  <div class="buttons">
    <button class="ngap" onclick="chonLoai('ngap')">ğŸš« ÄÆ°á»ng ngáº­p</button>
    <button class="antoan" onclick="chonLoai('antoan')">âœ… Äiá»ƒm an toÃ n</button>
    <button class="cuuho" onclick="chonLoai('cuuho')">ğŸ†˜ Cáº§n cá»©u há»™</button>
    <button class="tacduong" onclick="chonLoai('tacduong')">ğŸ›‘ğŸš— Táº¯c Ä‘Æ°á»ng</button>
    <button class="timduong" onclick="batCheDoTimDuong()">ğŸš— TÃ¬m Ä‘Æ°á»ng</button>
    <button class="kiemthu" onclick="testNhieuNguoi()">ğŸ§ª Kiá»ƒm thá»­ hiá»‡u nÄƒng</button>
  </div>
 
  <!-- NÃºt kiá»ƒm thá»­ -->
  <div style="margin:10px;">
    
  </div>

  <!-- Báº£n Ä‘á»“ -->
  <div id="map"></div>

  <!-- Script -->
  <script src="mapCore.js"></script> // Báº£n Ä‘á»“ vÃ  vá»‹ trÃ­ ngÆ°á»i dÃ¹ng
  <script src="markerManager.js"></script> // Quáº£n lÃ½ marker
  <script src="routing.js"></script> // TÃ­nh nÄƒng Ä‘á»‹nh tuyáº¿n
  <script src="testPerformance.js"></script> // Kiá»ƒm thá»­ hiá»‡u nÄƒng

  <script>
  // ================== HÃ€M Xá»¬ LÃ CHÃNH ==================
  window.addEventListener("DOMContentLoaded", () => {
    // Khá»Ÿi táº¡o báº£n Ä‘á»“
    map = khoiTaoBanDo();
    // GÃ¡n sá»± kiá»‡n vá»‹ trÃ­ ngÆ°á»i dÃ¹ng
    map.on('locationfound', xuLyLocationFound);
    map.on('locationerror', xuLyLocationError);
    // Gáº¯n sá»± kiá»‡n click trÃªn báº£n Ä‘á»“
    map.on('click', xuLyClickBanDo);
    // Táº£i dá»¯ liá»‡u ban Ä‘áº§u
    taiDuLieuBanDau();
  });
  </script>

</body>
</html>
